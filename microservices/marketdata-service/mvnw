#!/bin/sh
set -e
MAVEN_PROJECTBASEDIR=${MAVEN_PROJECTBASEDIR:-"$(cd "$(dirname "$0")"; pwd -P)"}
WRAPPER_JAR="$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.jar"
WRAPPER_PROPERTIES="$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.properties"

if [ ! -f "$WRAPPER_JAR" ]; then
  echo "Downloading Maven Wrapper..."
  mkdir -p "$MAVEN_PROJECTBASEDIR/.mvn/wrapper"
  curl -fsSL "https://repo.maven.apache.org/maven2/org/apache/maven/wrapper/maven-wrapper/3.2.0/maven-wrapper-3.2.0.jar" -o "$WRAPPER_JAR"
fi

JAVA_CMD=${JAVA_HOME:+$JAVA_HOME/bin/}java

exec "$JAVA_CMD" -Dmaven.multiModuleProjectDirectory=$MAVEN_PROJECTBASEDIR \
  -cp "$WRAPPER_JAR" org.apache.maven.wrapper.MavenWrapperMain "$@"
